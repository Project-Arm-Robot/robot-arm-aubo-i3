import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
import pandas as pd

# Data input
data = """point_num,x,y,z,direction_x,direction_y
1,0.0,0.002,0.0,0.0,0.0015773502691896258
2,0.001,0.002,0.0,0.0007886751345948128,0.0013660254037844387
3,0.0015773502691896258,0.002,0.0,0.0,0.0015773502691896258
4,-0.00015470053837925157,0.004,0.0,0.0007886751345948128,0.0013660254037844387
5,0.0015773502691896258,0.004,0.0,0.0,0.0015773502691896258
6,-0.0013094010767585032,0.006,0.0,0.0007886751345948128,0.0013660254037844387
7,0.0013094010767585032,0.006,0.0,-0.0007886751345948131,0.0013660254037844387
8,0.0013094010767585032,0.006,0.0,0.0,0.0015773502691896258
9,-0.002464101615137754,0.008,0.0,0.0007886751345948128,0.0013660254037844387
10,0.0006905989232414977,0.008,0.0,0.0007886751345948128,0.0013660254037844387
11,0.002464101615137754,0.008,0.0,-0.0007886751345948131,0.0013660254037844387
12,0.0015773502691896258,0.008,0.0,0.0,0.0015773502691896258
13,-0.0036188021535170055,0.01,0.0,0.0007886751345948128,0.0013660254037844387
14,-0.00046410161513775385,0.01,0.0,0.0007886751345948128,0.0013660254037844387
15,0.0036188021535170055,0.01,0.0,-0.0007886751345948131,0.0013660254037844387
16,0.00046410161513775385,0.01,0.0,-0.0007886751345948131,0.0013660254037844387
17,0.0020414518843273797,0.01,0.0,0.0,0.0015773502691896258
18,-0.004773502691896258,0.012,0.0,0.0007886751345948128,0.0013660254037844387
19,-0.0016188021535170063,0.012,0.0,0.0007886751345948128,0.0013660254037844387
20,0.004773502691896258,0.012,0.0,-0.0007886751345948131,0.0013660254037844387
21,0.0016188021535170063,0.012,0.0,-0.0007886751345948131,0.0013660254037844387
22,0.003196152422706632,0.012,0.0,0.0,0.0015773502691896258
23,-0.00592820323027551,0.014,0.0,0.0007886751345948128,0.0013660254037844387
24,-0.0027735026918962588,0.014,0.0,0.0007886751345948128,0.0013660254037844387
25,0.00038119784648299373,0.014,0.0,0.0007886751345948128,0.0013660254037844387
26,0.00592820323027551,0.014,0.0,-0.0007886751345948131,0.0013660254037844387
27,0.0027735026918962588,0.014,0.0,-0.0007886751345948131,0.0013660254037844387
28,0.0015773502691896263,0.014,0.0,0.0,0.0015773502691896258

"""

# Read the CSV data
from io import StringIO
df = pd.read_csv(StringIO(data))

# Extract coordinates and directions
x = df['x']
y = df['y']
z = df['z']
u = df['direction_x']
v = df['direction_y']
w = [0]*len(df)  # No z-direction

# Plot
fig = plt.figure(figsize=(10, 6))
ax = fig.add_subplot(111, projection='3d')
ax.quiver(x, y, z, u, v, w, length=1, normalize=False, color='blue')

ax.set_xlabel('X')
ax.set_ylabel('Y')
ax.set_zlabel('Z')
ax.set_title('3D Point Cloud with Direction Vectors')

plt.show()
